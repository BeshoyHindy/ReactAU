webpackJsonp([14,17],{905:function(e,t,r){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var n=(r(18),r(0)),i=r.n(n),l=r(207),d=r(373),c=(r(370),r(205),r(369)),p=r(206),u=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(t,r,a,s){var o=t&&t.defaultProps,n=arguments.length-3;if(r||0===n||(r={}),r&&o)for(var i in o)void 0===r[i]&&(r[i]=o[i]);else r||(r=o||{});if(1===n)r.children=s;else if(n>1){for(var l=Array(n),d=0;d<n;d++)l[d]=arguments[d+3];r.children=l}return{$$typeof:e,type:t,key:void 0===a?null:""+a,ref:null,props:r,_owner:null}}}(),m=u("strong",{},void 0,"Oops!"),f=u("div",{className:"panel-heading"},void 0,u("h3",{className:"panel-title"},void 0,"Add User")),b=u("div",{className:"col-lg-6 "},void 0,u(l.a,{name:"picture",component:p.a,label:"Add a picture"}),u(l.a,{name:"username",component:p.b,type:"text",label:"User Name"})),v=u(l.a,{name:"email",component:p.b,type:"email",label:"E-Mail",require:!0}),h=u(l.a,{name:"password",component:p.b,type:"password",label:"Password",require:!0}),w=u(l.a,{name:"passwordConfirm",component:p.b,type:"password",label:"Confirm Password",require:!0}),y=u("hr",{}),g=function(e){function t(r){a(this,t);var o=s(this,e.call(this,r));return o.state={upload:0,errorMessage:"",success:!1},o.handleFormSubmit=o.handleFormSubmit.bind(o),o.renderAlert=o.renderAlert.bind(o),o.fileProgress=o.fileProgress.bind(o),o}return o(t,e),t.prototype.handleFormSubmit=function(e){var t=this,r=function(e){return t.fileProgress(e)},a=new FormData;a.append("password",e.password),a.append("email",e.email),a.append("username",e.username),a.append("accessRight",e.accessRight),e.picture&&a.append("upload_picture",e.picture[0]),this.setState({upload:1}),d.a.addUser(a,r).then(function(e){t.setState({upload:0,errorMessage:"",success:!0})}).catch(function(e){t.setState({upload:0,errorMessage:"Process Fail, Error Message: "+e.err,success:!1})})},t.prototype.fileProgress=function(e){var t=Math.round(100*e.loaded/e.total);this.setState({upload:t})},t.prototype.renderAlert=function(){if(this.state.errorMessage||this.state.success)return u("div",{className:"alert "+(this.state.success?"alert-success":"alert-danger")},void 0,this.state.success?"Success !!":u("div",{},void 0,m," ",this.state.errorMessage," !!"))},t.prototype.render=function(){var e=this.props,t=e.handleSubmit,r=e.pristine,a=e.submitting;return u("div",{className:"col-lg-12 "},void 0,u(c.a,{linkPair:[{link:"/home",desc:"Home"},{link:"/admin/productChange/0",desc:"Administration"},{link:"/admin/addUser",desc:"Add User"}]}),u("div",{className:"well"},void 0,u("div",{className:"panel panel-danger add-user-panel"},void 0,f,u("div",{className:"panel-body sign-up"},void 0,u("form",{onSubmit:t(this.handleFormSubmit)},void 0,b,u("div",{className:"col-lg-6 "},void 0,v,h,w,u(l.a,{name:"accessRight",component:p.c,label:"User Type",options:[{value:"0",text:"Normal User"},{value:"8",text:"Administrator"}]})),u("div",{className:"col-lg-12"},void 0,this.renderAlert(),y,u("div",{},void 0,u("button",{type:"submit",disabled:r||a,className:"btn btn-warning submit-btn"},void 0,"Submit"))))))))},t}(i.a.Component),S=function(e){var t={};return e.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e.email)||(t.email="Invalid email address"):t.email="Required",e.password||(t.password="Please enter a password"),e.passwordConfirm||(t.passwordConfirm="Please enter a password confirmation"),e.password!==e.passwordConfirm&&(t.password="Passwords must match"),t};t.default=r.i(l.b)({form:"adduser",validate:S})(g)}});