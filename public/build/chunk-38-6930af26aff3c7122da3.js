webpackJsonp([38],{313:function(e,r,t){"use strict";function s(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function a(e,r){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!r||"object"!=typeof r&&"function"!=typeof r?e:r}function n(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function, not "+typeof r);e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(e,r):e.__proto__=r)}Object.defineProperty(r,"__esModule",{value:!0});var o=(t(16),t(0)),i=t.n(o),l=t(156),d=t(303),c=t(85),p=t(62),u=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(r,t,s,a){var n=r&&r.defaultProps,o=arguments.length-3;if(t||0===o||(t={}),t&&n)for(var i in n)void 0===t[i]&&(t[i]=n[i]);else t||(t=n||{});if(1===o)t.children=a;else if(o>1){for(var l=Array(o),d=0;d<o;d++)l[d]=arguments[d+3];t.children=l}return{$$typeof:e,type:r,key:void 0===s?null:""+s,ref:null,props:t,_owner:null}}}(),m=u("strong",{},void 0,"Oops!"),f=u("div",{className:"panel-heading"},void 0,u("h3",{className:"panel-title"},void 0,"Add User")),v=u("div",{className:"col-lg-6 "},void 0,u(l.a,{name:"picture",component:p.renderDropzoneInput,label:"Add a picture"}),u(l.a,{name:"username",component:p.renderField,type:"text",label:"User Name"})),b=u(l.a,{name:"email",component:p.renderField,type:"email",label:"E-Mail",require:!0}),h=u(l.a,{name:"password",component:p.renderField,type:"password",label:"Password",require:!0}),w=u(l.a,{name:"passwordConfirm",component:p.renderField,type:"password",label:"Confirm Password",require:!0}),y=u("hr",{}),g=function(e){function r(t){s(this,r);var n=a(this,e.call(this,t));return n.state={upload:0,errorMessage:"",success:!1},n.handleFormSubmit=n.handleFormSubmit.bind(n),n.renderAlert=n.renderAlert.bind(n),n.fileProgress=n.fileProgress.bind(n),n}return n(r,e),r.prototype.handleFormSubmit=function(e){var r=this,t=function(e){return r.fileProgress(e)},s=new FormData;s.append("password",e.password),s.append("email",e.email),s.append("username",e.username),s.append("accessRight",e.accessRight),e.picture&&s.append("upload_picture",e.picture[0]),this.setState({upload:1}),d.a.addUser(s,t).then(function(e){r.setState({upload:0,errorMessage:"",success:!0})}).catch(function(e){r.setState({upload:0,errorMessage:"Process Fail, Error Message: "+e.err,success:!1})})},r.prototype.fileProgress=function(e){var r=Math.round(100*e.loaded/e.total);this.setState({upload:r})},r.prototype.renderAlert=function(){if(this.state.errorMessage||this.state.success)return u("div",{className:"alert "+(this.state.success?"alert-success":"alert-danger")},void 0,this.state.success?"Success !!":u("div",{},void 0,m," ",this.state.errorMessage," !!"))},r.prototype.render=function(){var e=this.props,r=e.handleSubmit,t=e.pristine,s=e.submitting;return u("div",{className:"col-lg-12 "},void 0,u(c.Breadcrumb,{linkPair:[{link:"/home",desc:"Home"},{link:"/admin/productChange/0",desc:"Administration"},{link:"/admin/addUser",desc:"Add User"}]}),u("div",{className:"well"},void 0,u("div",{className:"panel panel-danger add-user-panel"},void 0,f,u("div",{className:"panel-body sign-up"},void 0,u("form",{onSubmit:r(this.handleFormSubmit)},void 0,v,u("div",{className:"col-lg-6 "},void 0,b,h,w,u(l.a,{name:"accessRight",component:p.renderSelectField,label:"User Type",options:[{value:"0",text:"Normal User"},{value:"8",text:"Administrator"}]})),u("div",{className:"col-lg-12"},void 0,this.renderAlert(),y,u("div",{},void 0,u("button",{type:"submit",disabled:t||s,className:"btn btn-warning submit-btn"},void 0,"Submit"))))))))},r}(i.a.Component),S=function(e){var r={};return e.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e.email)||(r.email="Invalid email address"):r.email="Required",e.password||(r.password="Please enter a password"),e.passwordConfirm||(r.passwordConfirm="Please enter a password confirmation"),e.password!==e.passwordConfirm&&(r.password="Passwords must match"),r};r.default=t.i(l.b)({form:"adduser",validate:S})(g)}});