webpackJsonp([15],{314:function(e,t,r){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e,t){return{initialValues:{username:e.auth.user&&e.auth.user.profile&&e.auth.user.profile.username||"",email:e.auth.user&&e.auth.user.email||"",picture:e.auth.user&&e.auth.user.profile&&e.auth.user.profile.picture||""},auth:e.auth,errorMessage:e.auth.error}}Object.defineProperty(t,"__esModule",{value:!0});var s=r(16),u=r(0),l=r.n(u),p=r(160),d=r(326),c=(r.n(d),r(806)),f=r(63),h=(r(818),function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(t,r,a,n){var o=t&&t.defaultProps,i=arguments.length-3;if(r||0===i||(r={}),r&&o)for(var s in o)void 0===r[s]&&(r[s]=o[s]);else r||(r=o||{});if(1===i)r.children=n;else if(i>1){for(var u=Array(i),l=0;l<i;l++)u[l]=arguments[l+3];r.children=u}return{$$typeof:e,type:t,key:void 0===a?null:""+a,ref:null,props:r,_owner:null}}}()),m=h("strong",{},void 0,"Oops!"),v=h("img",{src:"/img/ajax-loader.gif",alt:""}),w=h("div",{className:"panel-heading"},void 0,h("h3",{className:"panel-title"},void 0,"Edit User Profile")),g=h("div",{className:"col-lg-6 "},void 0,h(p.a,{name:"username",component:f.renderField,type:"text",label:"User Name"}),h(p.a,{name:"email",component:f.renderField,type:"email",label:"E-Mail",require:!0}),h(p.a,{name:"password",component:f.renderField,type:"password",label:"Reset Password",require:!0}),h(p.a,{name:"passwordConfirm",component:f.renderField,type:"password",label:"Confirm Reset Password",require:!0})),b=h("hr",{}),y=function(e){function t(r){a(this,t);var o=n(this,e.call(this,r));return o.state={upload:0},o.handleFormSubmit=o.handleFormSubmit.bind(o),o.renderAlert=o.renderAlert.bind(o),o.fileProgress=o.fileProgress.bind(o),o}return o(t,e),t.prototype.handleFormSubmit=function(e){var t=this,r=function(e){return t.fileProgress(e)},a=new FormData;a.append("password",e.password),a.append("email",e.email),a.append("username",e.username),e.picture&&a.append("upload_picture",e.picture[0]),this.setState({upload:1}),this.props.userChangeProfile(a,r)},t.prototype.fileProgress=function(e){var t=Math.round(100*e.loaded/e.total);this.setState({upload:t})},t.prototype.renderAlert=function(){if(this.props.errorMessage)return h("div",{className:"alert alert-danger"},void 0,m," ",this.props.errorMessage)},t.prototype.render=function(){var e=this.props,t=e.handleSubmit,r=e.pristine,a=e.submitting,n=this.props,o=(n.auth,n.initialValues.picture);return h("div",{className:"loading-wrap"},void 0,h("div",{className:"ajax-loading-big "+(this.state.upload>0?"fade-show":"fade-hide")},void 0,v,h("div",{className:"ajax-loading-progress"},void 0,"Processing....",this.state.upload,"%")),h("div",{className:"well"},void 0,h("div",{className:"panel panel-danger add-user-panel"},void 0,w,h("div",{className:"panel-body sign-up"},void 0,h("form",{onSubmit:t(this.handleFormSubmit)},void 0,h("div",{className:"col-lg-6 "},void 0,h(p.a,{name:"picture",src:o,component:f.renderDropzoneInput,label:"Add a picture"})),g,h("div",{className:"col-lg-12"},void 0,this.renderAlert(),b,h("div",{},void 0,h("button",{type:"submit",disabled:r||a,className:"btn btn-warning submit-btn"},void 0,"Submit"))))))))},t}(l.a.Component),P=function(e){var t={};return e.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e.email)||(t.email="Invalid email address"):t.email="Required",e.password||(t.password="Please enter a password"),e.passwordConfirm||(t.passwordConfirm="Please enter a password confirmation"),e.password!==e.passwordConfirm&&(t.password="Passwords must match"),t};t.default=r.i(s.b)(i,c)(r.i(p.b)({form:"edituser",validate:P})(y))},806:function(e,t,r){"use strict";function a(e){return{type:l.k,user:e}}function n(e){return{type:l.l,error:e}}function o(e,t){return function(o){return o(r.i(p.a)()),u.a.setUserProfile(e,t,localStorage.getItem("token")).then(function(e){o(a(e.details))}).catch(function(e){o(n(e.err))})}}function i(e){return function(t){return u.a.setUserProductRate(e,localStorage.getItem("token")).then(function(e){t({type:l.m,data:e.user_data}),t({type:l.n,stars:e.product_stars})}).catch(function(e){})}}function s(e){return function(t){return u.a.setUserFavorite(e,localStorage.getItem("token")).then(function(e){t({type:l.o,data:e.user_data}),t({type:l.p,favorite:e.product_favorite})}).catch(function(e){})}}Object.defineProperty(t,"__esModule",{value:!0}),t.userChangeProfile=o,t.setUserProductRate=i,t.setUserFavorite=s;var u=(r(92),r(808)),l=r(10),p=r(62)},808:function(e,t,r){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var n=r(46),o=(r.n(n),r(60)),i=r.n(o),s=r(61),u=function(){function e(){a(this,e)}return e.setUserProfile=function(e,t,r){return i()({method:"post",url:n.api_server.http.host+":"+n.api_server.http.port+"/api/account",dataType:"JSON",data:e,headers:{authorization:r},onUploadProgress:t}).then(function(e){return e.data}).catch(function(e){throw new s.a(e)})},e.setUserProductRate=function(e,t){return i()({method:"post",url:n.api_server.http.host+":"+n.api_server.http.port+"/api/account/rate/"+e.id,dataType:"JSON",data:{rate:e.rate},headers:{authorization:t}}).then(function(e){return e.data}).catch(function(e){throw new s.a(e)})},e.setUserFavorite=function(e,t){return i()({method:"post",url:n.api_server.http.host+":"+n.api_server.http.port+"/api/account/favorite/"+e.id,dataType:"JSON",data:{love:e.love},headers:{authorization:t}}).then(function(e){return e.data}).catch(function(e){throw new s.a(e)})},e}();t.a=u},818:function(e,t,r){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var n=r(46),o=(r.n(n),r(60)),i=r.n(o),s=r(61),u=function(){function e(){a(this,e)}return e.upLoadImages=function(e,t,r){return i()({method:"post",url:n.api_server.http.host+":"+n.api_server.http.port+"/api/file/images/"+e,dataType:"JSON",data:t,headers:{authorization:localStorage.getItem("token")},onUploadProgress:r}).then(function(e){return e.data}).catch(function(e){throw new s.a(e)})},e.upLoadDocs=function(e,t,r){return i()({method:"post",url:n.api_server.http.host+":"+n.api_server.http.port+"/api/file/docs/"+e,dataType:"JSON",data:t,headers:{authorization:localStorage.getItem("token")},onUploadProgress:r}).then(function(e){return e.data}).catch(function(e){throw new s.a(e)})},e}();t.a=u}});